const h=new Set(["a","an","and","are","as","at","be","but","by","for","from","how","i","in","is","it","of","on","or","the","to","with","that","this","those","these","near","around","about","me","my","our","we","you"]),u=[{pattern:/\bbreast cancer\b/i,group:['"breast cancer"','"triple negative breast cancer"','"breast neoplasms"','"mammary carcinoma"']},{pattern:/\bprostate cancer\b/i,group:['"prostate cancer"','"prostatic neoplasms"']},{pattern:/\blung cancer\b/i,group:['"lung cancer"',"NSCLC","SCLC",'"non small cell lung cancer"','"small cell lung cancer"']},{pattern:/\bcolorectal cancer\b/i,group:['"colorectal cancer"',"CRC",'"colon cancer"','"rectal cancer"']},{pattern:/\bmelanoma\b/i,group:["melanoma",'"cutaneous melanoma"']},{pattern:/\bovarian cancer\b/i,group:['"ovarian cancer"','"ovarian neoplasms"']},{pattern:/\bpancreatic cancer\b/i,group:['"pancreatic cancer"','"pancreatic neoplasms"']},{pattern:/\bbrain cancer\b|\bglioblastoma\b/i,group:["glioblastoma","GBM",'"brain tumor"','"brain neoplasms"']},{pattern:/\bheart attack\b|\bmyocardial infarction\b|\bmi\b/i,group:['"myocardial infarction"','"heart attack"',"MI"]},{pattern:/\batrial fibrillation\b|\bafib\b/i,group:['"atrial fibrillation"',"AFib"]},{pattern:/\bcongestive heart failure\b|\bchf\b/i,group:['"heart failure"',"CHF",'"congestive heart failure"']},{pattern:/\bhypertension\b|\bhigh blood pressure\b/i,group:["hypertension",'"high blood pressure"']},{pattern:/\btype\s*2\s*diabetes\b|\bt2d\b|\bdiabetes\b/i,group:['"type 2 diabetes"',"T2D","diabetes"]},{pattern:/\bobesity\b|\bweight loss\b/i,group:["obesity",'"weight loss"']},{pattern:/\bcopd\b|\bchronic obstructive pulmonary disease\b/i,group:["COPD",'"chronic obstructive pulmonary disease"']},{pattern:/\bazthma\b|\basthma\b/i,group:["asthma"]},{pattern:/\balzheimer'?s?\b|\bad\b/i,group:["Alzheimer",'"Alzheimer disease"',"AD"]},{pattern:/\bparkinson'?s?\b/i,group:["Parkinson",'"Parkinson disease"']},{pattern:/\bdepression\b|\bmajor depressive\b/i,group:["depression",'"major depressive disorder"',"MDD"]},{pattern:/\bchemo\b|\bchemotherapy\b/i,group:["chemotherapy","chemo"]},{pattern:/\bradiation\b|\bradiotherapy\b/i,group:["radiation","radiotherapy"]},{pattern:/\bimmunotherapy\b|\bcheckpoint\b/i,group:["immunotherapy",'"immune checkpoint"',"pembrolizumab","nivolumab",'"PD-1"','"PD-L1"']},{pattern:/\bstage\s*4\b|\bstage\s*iv\b|\bmetastatic\b/i,group:['"stage iv"','"stage 4"',"metastatic"]},{pattern:/\brecurrence\b|\brecurrent\b/i,group:["recurrent","recurrence"]}],l={nsclc:['"non small cell lung cancer"',"NSCLC"],sclc:['"small cell lung cancer"',"SCLC"],tnbc:['"triple negative breast cancer"',"TNBC"],copd:["COPD",'"chronic obstructive pulmonary disease"'],afib:["AFib",'"atrial fibrillation"'],mi:["MI",'"myocardial infarction"'],crc:["CRC",'"colorectal cancer"'],gbm:["GBM","glioblastoma"]};function m(t){return t.toLowerCase().replace(/[^a-z0-9\s\-]/g," ").split(/\s+/).filter(Boolean)}function g(t){return t.filter(r=>!h.has(r))}function f(t){const r=(t||"").trim();if(!r)return"";const o=[];let a=r;for(const e of u)e.pattern.test(a)&&(o.push(`(${Array.from(new Set(e.group)).join(" OR ")})`),a=a.replace(new RegExp(e.pattern,"gi")," "));let p=g(m(a));const i=[],s=[];for(const e of p){const b=l[e];b?i.push(`(${Array.from(new Set(b)).join(" OR ")})`):s.push(e)}const c=s.map(e=>e.includes(" ")?`"${e}"`:e).join(" AND "),n=[...o,...i];return c&&n.push(c),n.length===0?r:n.join(" AND ")}function d(t){const r=(t||"").trim();if(!r)return"";const o=[];let a=r;for(const e of u)e.pattern.test(a)&&(o.push(`(${Array.from(new Set(e.group)).join(" OR ")})`),a=a.replace(new RegExp(e.pattern,"gi")," "));let p=g(m(a));const i=[],s=[];for(const e of p){const b=l[e];b?i.push(`(${Array.from(new Set(b)).join(" OR ")})`):s.push(e)}const c=s.map(e=>e.includes(" ")?`"${e}"`:e).join(" OR "),n=[...o,...i];return c&&n.push(c),n.length===0?r:n.join(" OR ")}function y(t){const r=(t||"").trim();return r?/^\s*(usa?|united\s+states?)\s*$/i.test(r)?"United States":r.replace(/^\s*(near|around|in|within)\s+/i,"").replace(/\s{2,}/g," ").trim():""}export{d as a,f as b,y as n};
