import{c as u,e as h,u as g,R as p,j as e}from"./index-D6Ufhlin.js";import{C as f}from"./circle-check-Ctxy1OWX.js";import{S as b}from"./shield-DQUYGTD0.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=u("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);function j({value:i}){const r=Math.max(0,Math.min(100,Math.round(i)));return e.jsxs("div",{className:"w-56",children:[e.jsxs("div",{className:"mx-auto h-28 w-52 rounded-[140px] overflow-hidden relative","aria-label":`Compatibility ${r}%`,children:[e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-28 rounded-t-[140px] bg-gray-100"}),e.jsx("div",{className:"absolute inset-x-0 bottom-0 h-28 rounded-t-[140px]",style:{background:`conic-gradient(#1033e5 ${r*1.8}deg, #e5e7eb 0deg)`,mask:"radial-gradient(circle at 50% 100%, transparent 55%, black 56%)",WebkitMask:"radial-gradient(circle at 50% 100%, transparent 55%, black 56%)"}})]}),e.jsxs("div",{className:"text-center mt-2",children:[e.jsxs("div",{className:"text-2xl font-semibold",children:[r,"%"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Criteria passed"})]}),e.jsx("div",{className:"mt-2 text-center",children:e.jsx("button",{className:"mx-auto rounded-full bg-gray-100 px-3 py-1 text-xs",children:"COMPATIBILITY SCORE"})})]})}function C(){const i=h(),{search:r}=g(),a=p.useMemo(()=>{try{const t=localStorage.getItem("tc_eligibility_profile");if(t)return JSON.parse(t);const c=localStorage.getItem("tc_health_profile_v1");if(c){const s=JSON.parse(c);return{condition:s.primaryCondition||"",year:s.diagnosed||"",meds:Array.isArray(s.medications)?s.medications.map(o=>o==null?void 0:o.name).filter(Boolean).join(", "):"",age:s.age?parseInt(String(s.age),10):void 0,gender:s.gender||"",race:s.race||"",language:s.language||""}}}catch{}return{}},[]),m=(()=>{if(a&&typeof a.age=="number")return a.age>=18;if(a&&a.dob){const t=Date.parse(a.dob);if(!Number.isNaN(t))return Math.floor((Date.now()-t)/315576e5)>=18}return!1})(),l=[{label:"Condition match",pass:!!a.condition},{label:"Location match",pass:!!(a.zip||a.distance)},{label:"Age requirement",pass:m},{label:"Gender requirement",pass:!!a.gender},{label:"Race requirement",pass:!!a.race},{label:"Language requirement",pass:!!a.language}],n=l.filter(t=>t.pass),d=l.filter(t=>!t.pass),x=n.length/l.length*100;return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50",children:e.jsxs("div",{className:"relative w-full max-w-3xl mx-4 rounded-2xl bg-white shadow-xl p-6 sm:p-8",children:[e.jsx("button",{"aria-label":"Close",onClick:()=>i(-1),className:"absolute right-3 top-3 rounded-full p-2 text-gray-500 hover:bg-gray-100",children:"Ã—"}),e.jsx("h2",{className:"text-center text-lg font-semibold",children:"Great fit! You may qualify for this study."}),e.jsxs("p",{className:"mt-1 text-center text-sm text-gray-600",children:["Based on your answers, you passed ",n.length," out of ",l.length," eligibility criteria. See your match details below."]}),e.jsxs("div",{className:"mt-6 grid sm:grid-cols-2 gap-6 items-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx(j,{value:x})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Passed Criteria"}),e.jsx("ul",{className:"space-y-2 text-sm",children:n.map(t=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(f,{className:"h-4 w-4 text-emerald-600"})," ",t.label]},t.label))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium mb-2",children:"Failed Criteria"}),e.jsx("ul",{className:"space-y-2 text-sm",children:d.length===0?e.jsx("li",{className:"text-gray-600",children:"None"}):d.map(t=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(y,{className:"h-4 w-4 text-red-500"})," ",t.label]},t.label))})]})]})]}),e.jsxs("div",{className:"mt-6 rounded-xl bg-[#1033e5] text-white p-5",children:[e.jsx("div",{className:"font-medium",children:"Ready to connect with the trial center and learn about next steps?"}),e.jsx("p",{className:"text-sm text-white/90 mt-1",children:"Create a free TrialCliniq account to securely send your eligibility report, contact the study coordinator, and get matched to other future studies you may qualify for."}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("button",{onClick:()=>i("/patients/volunteer"),className:"inline-flex items-center justify-center rounded-full bg-white text-gray-900 px-5 py-2 text-sm font-medium hover:bg-gray-100",children:"Continue to Sign Up"})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-center gap-2 text-xs text-gray-600",children:[e.jsx(b,{className:"h-4 w-4"})," Your information is securely shared only with this research site and never sold."]})]})})}export{C as default};
