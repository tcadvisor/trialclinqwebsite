import{e as S,f as b,r as m,j as e}from"./index-tp3jFlXE.js";import{H as _}from"./HomeHeader-BtH9-5pg.js";import{S as I}from"./SignUpForm-7VtZhD4E.js";import"./HeaderActions-R4sMM2lu.js";import"./search-DJL6A17W.js";import"./shield-BsG1tWcS.js";import"./phoneValidation-6utpIYm-.js";function E(){const o=S(),{signIn:c}=b(),[p,n]=m.useState(!1),[g,r]=m.useState(null);async function d(a){var s,l;a.preventDefault(),r(null),n(!0);const t=a.currentTarget,u=t.email.value.trim(),h=t.phone.value.trim(),x=t.firstName.value.trim(),y=t.lastName.value.trim(),v=(l=(s=t.ref)==null?void 0:s.value)==null?void 0:l.trim();try{localStorage.setItem("pending_signup_v1",JSON.stringify({email:u,firstName:x,lastName:y,phone:h,ref:v,role:"patient"}));try{localStorage.removeItem("tc_health_profile_v1"),localStorage.removeItem("tc_health_profile_metadata_v1"),localStorage.removeItem("tc_docs")}catch{}o("/patients/consent")}catch(i){r(i instanceof Error?i.message:"Sign up failed. Please try again.")}finally{n(!1)}}function f(){const a={email:"demo.patient@example.com",firstName:"Demo",lastName:"Patient",userId:"demo-patient-12345",role:"patient"};localStorage.setItem("tc_health_profile_v1",JSON.stringify({patientId:"demo-patient-12345",email:"demo.patient@example.com",emailVerified:!0,age:"45",weight:"75",phone:"+1-555-0123",gender:"Male",race:"Caucasian",language:"English",bloodGroup:"O",genotype:"Unknown",hearingImpaired:!1,visionImpaired:!1,primaryCondition:"Diabetes",diagnosed:"2020",allergies:[],medications:[{name:"Metformin",dose:"500mg"}],additionalInfo:"Type 2 diabetes management",ecog:"0",diseaseStage:"Stage 2",biomarkers:"HbA1c 7.5%",priorTherapies:[],comorbidityCardiac:!1,comorbidityRenal:!1,comorbidityHepatic:!1,comorbidityAutoimmune:!1,infectionHIV:!1,infectionHBV:!1,infectionHCV:!1})),localStorage.setItem("tc_health_profile_metadata_v1",JSON.stringify({location:"San Francisco, CA",radius:"50 miles",lat:37.7749,lng:-122.4194})),c(a),o("/patients/eligible")}return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(_,{}),e.jsx(I,{title:"Create Patient Account",onSubmit:d,privacyPath:"/patients/privacy",signInPath:"/patients/login",error:g,isLoading:p}),e.jsx("div",{className:"max-w-2xl mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"For testing purposes:"}),e.jsx("button",{onClick:f,className:"inline-block rounded-full bg-gray-200 hover:bg-gray-300 text-gray-900 px-6 py-2 text-sm font-medium transition",children:"Login as Demo Patient"})]})})]})}export{E as default};
