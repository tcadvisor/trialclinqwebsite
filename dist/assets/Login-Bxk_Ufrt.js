import{e as v,u as y,f as j,r as l,R as N,j as e,L as w,s as E}from"./index-znp1ZwVH.js";import{H as L}from"./HomeHeader-CKVdYqKL.js";import"./HeaderActions-Bq1MN6TK.js";import"./search-A115qy-0.js";import"./shield-D8wUjd5V.js";function A(){const o=v(),i=y(),{isAuthenticated:c,signIn:h,user:r}=j(),[m,f]=l.useState(""),[d,u]=l.useState(null),[p,x]=l.useState(!1);N.useEffect(()=>{var a,s;if(c){const n=(s=(a=i.state)==null?void 0:a.from)==null?void 0:s.pathname,t=(r==null?void 0:r.role)==="provider"?"/providers/dashboard":"/patients/dashboard";o(n||t,{replace:!0})}},[c,o,i.state,r]);const g=async a=>{var s,n;a.preventDefault(),u(null),x(!0);try{localStorage.setItem("pending_role_v1","patient");const t=await E({email:m.trim(),password:""});if(t){h({...t,role:"patient"});const b=((n=(s=i.state)==null?void 0:s.from)==null?void 0:n.pathname)||"/patients/dashboard";o(b,{replace:!0})}}catch(t){u(t instanceof Error?t.message:"Invalid email or password. Please try again.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(L,{}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Participant Login"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Email",type:"email",value:m,onChange:a=>f(a.target.value)}),d&&e.jsx("div",{className:"text-sm text-red-600",children:d}),e.jsx("button",{className:"w-full px-4 py-2 rounded bg-gray-900 text-white hover:bg-black disabled:opacity-50 disabled:cursor-not-allowed",type:"submit",disabled:p,children:p?"Redirecting...":"Continue with Microsoft"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["No account? ",e.jsx(w,{to:"/patients/volunteer",className:"text-blue-600 hover:underline",children:"Sign up"})]})]})]})}export{A as default};
