import{R as r,j as e,L as z}from"./index-znp1ZwVH.js";import{S as H}from"./SiteHeader-CWRR36pe.js";import{f as K,a as k,b as Y}from"./ctgov-0NYeoFZ-.js";import{g as B,i as D,a as F}from"./providerTrials-BhBLO8rx.js";import{b as U,a as G}from"./searchQuery-B-mPG4l7.js";import{S as J}from"./search-A115qy-0.js";import{L as O}from"./loader-circle-BSEKbo_r.js";import{P as V}from"./plus-DUOaaLgi.js";import{P as W,T as X}from"./trash-2-B5wXd-Ny.js";import"./HeaderActions-Bq1MN6TK.js";function de(){const[d,E]=r.useState(""),[c,p]=r.useState(!1),[o,m]=r.useState(""),[f,P]=r.useState([]),[L,q]=r.useState(()=>{const t={};return B().forEach(s=>{s.nctId&&(t[s.nctId]=!0)}),t}),[l,x]=r.useState([]),M=r.useCallback(async()=>{const t=d.trim();if(t){p(!0),m("");try{const s=/^NCT\d{8}$/i.test(t);let a=s?await K(t):await k({q:U(t),pageSize:12});if(!s&&(a.studies||[]).length===0){const n=G(t);a=await k({q:n||t,pageSize:12})}P(a.studies||[]),(a.studies||[]).length===0&&m("No studies found.")}catch{m("Failed to load studies. Please try again.")}finally{p(!1)}}},[d]),$=t=>{t.preventDefault(),M()};return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[e.jsx(H,{}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl sm:text-4xl font-semibold text-center",children:"Active Clinical Trials"}),e.jsx("p",{className:"mt-2 text-center text-gray-600",children:"Link your ongoing trials to TrialCliniq for faster patient match opportunities. You can search existing trials from ClinicalTrials.gov or add them manually."}),e.jsxs("section",{className:"mt-8 space-y-5",children:[e.jsx("div",{className:"rounded-2xl border bg-white p-5",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Register a Clinical Trial"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"If your trial isn’t available via search, you can manually register it here to connect with eligible participants."})]}),e.jsxs(z,{to:"#",className:"inline-flex items-center gap-2 rounded-full border px-4 py-2 text-sm hover:bg-gray-50","aria-label":"Add Trial Manually",children:["Add Trial Manually ",e.jsx("span",{"aria-hidden":!0,children:"→"})]})]})}),e.jsxs("div",{className:"rounded-2xl border bg-white p-5",children:[e.jsx("div",{className:"text-sm text-gray-700",children:"Search from ClinicalTrials.gov"}),e.jsx("form",{onSubmit:$,className:"mt-3",children:e.jsxs("div",{className:"relative",children:[e.jsx(J,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-500"}),e.jsx("input",{value:d,onChange:t=>E(t.target.value),className:"w-full rounded-full border px-10 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter Trial NCT Number or Keyword","aria-label":"Enter Trial NCT Number or Keyword"}),e.jsx("button",{type:"submit",className:"absolute right-1 top-1/2 -translate-y-1/2 rounded-full bg-gray-900 px-4 py-2 text-white text-sm hover:bg-black",children:"Search"})]})}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500 flex items-center gap-2",children:[e.jsx("span",{className:"inline-block h-2 w-2 rounded-full bg-emerald-500","aria-hidden":!0}),"Your data stays private and protected with HIPAA-compliant security."]}),e.jsxs("div",{className:"mt-6 space-y-4",children:[c&&e.jsxs("div",{className:"p-4 text-sm text-gray-600 flex items-center gap-2",children:[e.jsx(O,{className:"h-4 w-4 animate-spin"})," Loading…"]}),!c&&o&&e.jsx("div",{className:"p-4 text-sm border border-red-200 bg-red-50 text-red-700 rounded",children:o}),!c&&!o&&f.length>0&&e.jsx("ul",{className:"rounded-xl border overflow-hidden",children:f.map((t,s)=>{var j,N,v,w,S,T,C,I,A;const a=((N=(j=t.protocolSection)==null?void 0:j.identificationModule)==null?void 0:N.nctId)||"",n=((w=(v=t.protocolSection)==null?void 0:v.identificationModule)==null?void 0:w.briefTitle)||"Untitled",u=((T=(S=t.protocolSection)==null?void 0:S.statusModule)==null?void 0:T.overallStatus)||"",y=((A=(I=(C=t.protocolSection)==null?void 0:C.sponsorCollaboratorsModule)==null?void 0:I.leadSponsor)==null?void 0:A.name)||"",g=Y(t),R=`${a||"idx"}-${s}`,b=!!(a&&l.some(i=>i.nctId===a)),h=a?L[a]||D(a):!1;return e.jsxs("li",{className:"flex items-center justify-between px-4 py-3 border-t first:border-t-0 bg-white hover:bg-gray-50",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",children:n}),e.jsxs("div",{className:"text-[11px] text-gray-500 truncate",children:[a,u?` · ${u}`:"",g?` · ${g}`:"",y?` · ${y}`:""]})]}),e.jsxs("div",{className:"shrink-0 flex items-center gap-2",children:[!h&&!b&&e.jsxs("button",{type:"button",onClick:()=>{a&&x(i=>i.some(Q=>Q.nctId===a)?i:[...i,{nctId:a,title:n,status:u}])},className:"inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs hover:bg-gray-50",children:[e.jsx(V,{className:"w-3.5 h-3.5"})," Add"]}),(h||b)&&e.jsx("span",{className:"inline-flex items-center gap-1 rounded-full bg-emerald-50 text-emerald-700 px-3 py-1 text-xs",children:h?"Added":"Selected"})]})]},R)})})]}),l.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("div",{className:"rounded-2xl border overflow-hidden bg-white",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-left text-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3 font-medium",children:"Trial Title"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"NCT Number"}),e.jsx("th",{className:"px-4 py-3 font-medium",children:"Status"}),e.jsx("th",{className:"px-4 py-3 font-medium text-right",children:"Actions"})]})}),e.jsx("tbody",{children:l.map(t=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"px-4 py-3",children:t.title}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:t.nctId}),e.jsx("td",{className:"px-4 py-3",children:t.status||"-"}),e.jsxs("td",{className:"px-4 py-3 text-right",children:[e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs hover:bg-gray-50 mr-2",disabled:!0,title:"Edit (coming soon)",children:[e.jsx(W,{className:"w-3.5 h-3.5"})," Edit"]}),e.jsxs("button",{type:"button",className:"inline-flex items-center gap-1 rounded-full border px-3 py-1 text-xs hover:bg-gray-50",onClick:()=>x(s=>s.filter(a=>a.nctId!==t.nctId)),children:[e.jsx(X,{className:"w-3.5 h-3.5"})," Remove"]})]})]},t.nctId))})]})}),e.jsx("div",{className:"mt-4",children:e.jsx("button",{type:"button",onClick:()=>{l.forEach(s=>F({nctId:s.nctId,title:s.title,status:s.status}));const t={};l.forEach(s=>{t[s.nctId]=!0}),q(s=>({...s,...t})),x([])},className:"w-full inline-flex items-center justify-center rounded-full bg-[#1033e5] px-4 py-3 text-white text-sm font-medium hover:bg-blue-700",children:"Confirm & Add Trials"})})]})]})]})]}),e.jsx("footer",{className:"w-full border-t mt-16",children:e.jsxs("div",{className:"w-full max-w-[1200px] mx-auto px-4 py-6 text-sm text-gray-600 flex items-center justify-between",children:[e.jsx("span",{children:"Copyright © 2025 TrialCliniq."}),e.jsx("span",{children:"Terms · Privacy"})]})})]})}export{de as default};
