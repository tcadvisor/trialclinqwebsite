import{f,R as t,j as e,L as c}from"./index-tp3jFlXE.js";import{S as v}from"./SiteHeader-CwQfVFlB.js";import{g as u,r as b}from"./providerTrials-D3cdPr4h.js";import"./HeaderActions-R4sMM2lu.js";function S(){const{user:x}=f(),a=(x==null?void 0:x.userId)||"",[n,j]=t.useState("All"),[d,N]=t.useState("All"),[r,y]=t.useState(""),[o,m]=t.useState(()=>a?u(a).map(s=>({title:s.title,id:s.nctId,status:s.status,sponsor:s.sponsor})):[]),[h,p]=t.useState(null);t.useEffect(()=>{if(!a)return;const s=i=>{i.key===`provider:trials:v1:${a}`&&m(u(a).map(l=>({title:l.title,id:l.nctId,status:l.status,sponsor:l.sponsor})))};return window.addEventListener("storage",s),()=>window.removeEventListener("storage",s)},[a]);const g=t.useMemo(()=>o.filter(s=>(n==="All"||(s.status||"").toLowerCase()===n.toLowerCase())&&(d==="All"||(s.phase||"")===d)&&(r.trim()===""||s.title.toLowerCase().includes(r.trim().toLowerCase())||s.id.toLowerCase().includes(r.trim().toLowerCase()))),[n,d,r,o]);return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[e.jsx(v,{}),e.jsxs("main",{className:"max-w-6xl mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"All Trials"}),e.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row gap-3 sm:items-center sm:justify-between",children:[e.jsx("div",{className:"relative w-full sm:w-[360px]",children:e.jsx("input",{value:r,onChange:s=>y(s.target.value),placeholder:"Search trial title",className:"w-full rounded-full border px-4 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Status:"}),e.jsx("select",{value:n,onChange:s=>j(s.target.value),className:"rounded-full border px-3 py-2 text-sm bg-white",children:["All","Recruiting","Completed","Suspended","Terminated","Unknown"].map(s=>e.jsx("option",{value:s,children:s},s))})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Phase:"}),e.jsx("select",{value:d,onChange:s=>N(s.target.value),className:"rounded-full border px-3 py-2 text-sm bg-white",children:["All","Phase I","Phase II","Phase III","Phase IV"].map(s=>e.jsx("option",{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"mt-4 rounded-2xl border bg-white",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-gray-500",children:[e.jsx("th",{className:"px-4 py-3",children:"Trial Title"}),e.jsx("th",{className:"px-4 py-3",children:"Trial ID"}),e.jsx("th",{className:"px-4 py-3",children:"Trial Phase"}),e.jsx("th",{className:"px-4 py-3",children:"Trial Status"}),e.jsx("th",{className:"px-4 py-3",children:"Sites"}),e.jsx("th",{className:"px-4 py-3",children:"Matched"}),e.jsx("th",{className:"px-4 py-3",children:"Pre-screening"}),e.jsx("th",{className:"px-4 py-3",children:"Pre-screen Pass"}),e.jsx("th",{className:"px-4 py-3"})]})}),e.jsx("tbody",{className:"divide-y",children:g.map(s=>e.jsxs("tr",{className:"relative",children:[e.jsx("td",{className:"px-4 py-3 max-w-[280px] truncate",children:s.title}),e.jsx("td",{className:"px-4 py-3 text-gray-600",children:s.id}),e.jsx("td",{className:"px-4 py-3",children:s.phase||"-"}),e.jsx("td",{className:"px-4 py-3",children:(s.status||"").toUpperCase()==="RECRUITING"?e.jsx("span",{className:"rounded-full bg-emerald-100 text-emerald-700 px-2 py-1 text-xs",children:"Recruiting"}):e.jsx("span",{className:"text-gray-700",children:s.status||"-"})}),e.jsx("td",{className:"px-4 py-3",children:s.sites??"-"}),e.jsx("td",{className:"px-4 py-3",children:s.matched??"-"}),e.jsx("td",{className:"px-4 py-3",children:s.prescreening??"-"}),e.jsx("td",{className:"px-4 py-3",children:s.pass??"-"}),e.jsx("td",{className:"px-4 py-3 text-right",children:e.jsxs("div",{className:"inline-block relative",children:[e.jsx("button",{className:"rounded-full border px-3 py-1 text-xs hover:bg-gray-50",onClick:()=>p(i=>i===s.id?null:s.id),"aria-haspopup":"menu","aria-expanded":h===s.id,children:"Manage"}),h===s.id&&e.jsx("div",{className:"absolute right-0 mt-2 w-36 rounded-md border bg-white shadow",children:e.jsx("button",{className:"block w-full text-left px-3 py-2 text-xs text-red-600 hover:bg-gray-50",onClick:()=>{a&&(b(a,s.id),m(i=>i.filter(l=>l.id!==s.id)),p(null))},children:"Delete trial"})})]})})]},s.id))})]})}),e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{className:"rounded border px-3 py-1 hover:bg-gray-50",children:"Previous"}),e.jsx("button",{className:"rounded border px-3 py-1 hover:bg-gray-50",children:"Next"})]}),e.jsx("div",{children:"Page 1 of 1"})]})]}),e.jsx("div",{className:"mt-6 text-sm text-gray-600",children:e.jsx(c,{to:"/providers/dashboard",className:"hover:underline",children:"Back to dashboard"})})]}),e.jsx("footer",{className:"w-full border-t mt-12",children:e.jsxs("div",{className:"w-full max-w-[1200px] mx-auto px-4 py-6 text-xs text-gray-600 flex items-center justify-between",children:[e.jsx("span",{children:"Copyright © 2025 TrialCliniq."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{to:"#",className:"hover:underline",children:"Terms of Conditions"}),e.jsx("span",{children:"•"}),e.jsx(c,{to:"#",className:"hover:underline",children:"Contact Us"}),e.jsx("span",{children:"•"}),e.jsx(c,{to:"#",className:"hover:underline",children:"Privacy Policy"})]}),e.jsx("span",{children:"Curated by Apperr"})]})})]})}export{S as default};
