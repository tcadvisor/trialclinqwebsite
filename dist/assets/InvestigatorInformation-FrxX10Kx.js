import{e as Z,f as z,r,j as e,k as $}from"./index-D6Ufhlin.js";import{S as D}from"./SiteHeader-DVJcy74P.js";import{f as H,g as E}from"./phoneValidation-6utpIYm-.js";import"./HeaderActions-BQWpB5F1.js";function F(){const _=Z(),{signIn:P}=z(),[p,d]=r.useState(""),[i,m]=r.useState(""),[o,u]=r.useState(null),[f,g]=r.useState(""),[x,v]=r.useState(""),[y,b]=r.useState(""),[N,C]=r.useState(""),[j,O]=r.useState(!1),[S,U]=r.useState(!1),[w,M]=r.useState(!1),[I,h]=r.useState(null),[k,A]=r.useState(!1);r.useEffect(()=>{try{const t=localStorage.getItem("tc_provider_profile_v1");if(t){const a=JSON.parse(t);a.investigatorName&&d(a.investigatorName),a.investigatorPhone&&m(a.investigatorPhone),a.investigatorEmail&&g(a.investigatorEmail),a.affiliatedOrganization&&v(a.affiliatedOrganization),a.regulatoryAuthority&&b(a.regulatoryAuthority)}const s=localStorage.getItem("pending_signup_v1");if(s){const a=JSON.parse(s);j&&a.firstName&&a.lastName&&d(`${a.firstName} ${a.lastName}`),S&&a.phone&&m(a.phone),w&&a.email&&g(a.email)}}catch(t){console.error("Error loading provider profile from localStorage:",t)}},[]);const B=t=>{const s=t.target.value,a=H(s,"US");m(a),o&&u(null)},J=()=>{if(i.trim()){const t=E(i,"US");u(t)}};async function q(t){if(t.preventDefault(),h(null),i.trim()){const s=E(i,"US");if(s){u(s);return}}A(!0);try{const s=localStorage.getItem("tc_provider_profile_v1"),l={...s?JSON.parse(s):{},investigatorName:p,investigatorPhone:i,investigatorEmail:f,affiliatedOrganization:x,regulatoryAuthority:y,regulatoryAuthorityAddress:N};localStorage.setItem("tc_provider_profile_v1",JSON.stringify(l)),console.log("âœ… Investigator information saved to localStorage");const c=localStorage.getItem("pending_signup_v1"),n=c?JSON.parse(c):{};await $({email:n.email||"",password:"",firstName:n.firstName||"",lastName:n.lastName||""})}catch(s){h(s instanceof Error?s.message:"Sign up failed. Please try again.")}finally{A(!1)}}function R(){try{const t=localStorage.getItem("pending_signup_v1"),s=t?JSON.parse(t):{},a=`dev-provider-${Date.now()}`;P({email:s.email||"test@example.com",firstName:s.firstName||"Test",lastName:s.lastName||"Provider",role:"provider",userId:a});const l=localStorage.getItem("tc_provider_profile_v1"),c=l?JSON.parse(l):{},n=a;localStorage.setItem("tc_provider_profile_v1",JSON.stringify({...c,providerId:n,email:s.email||"test@example.com"})),_("/providers/dashboard",{replace:!0})}catch(t){console.error("Bypass failed:",t),h("Bypass failed. Please try again.")}}return e.jsxs("div",{className:"min-h-screen bg-gray-50 text-gray-900",children:[e.jsx(D,{active:void 0}),e.jsxs("main",{className:"max-w-3xl mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl md:text-4xl font-semibold text-center",children:"Investigator Information"}),e.jsx("p",{className:"text-center text-gray-600 mt-2",children:"Enter your site's contact and location details for trial coordination"}),e.jsxs("div",{className:"mt-8 rounded-2xl border shadow-sm bg-white p-6 md:p-8",children:[I&&e.jsx("div",{className:"mb-4 rounded-lg border border-red-200 bg-red-50 px-4 py-3 text-sm text-red-700",children:I}),e.jsxs("form",{className:"space-y-5",onSubmit:q,children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Investigator Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{value:p,onChange:t=>d(t.target.value),placeholder:"Enter full name of the site investigator",className:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:t=>O(t.target.checked),className:"h-4 w-4"}),"Use my name as investigator"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Affiliated Organization Name",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{value:x,onChange:t=>v(t.target.value),placeholder:"Enter the affiliated organization name",className:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Investigator Phone",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"tel",value:i,onChange:B,onBlur:J,placeholder:"(555) 000-0000",className:`w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 ${o?"border-red-500 focus:ring-red-500":"focus:ring-blue-500"}`,required:!0}),o&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:o}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:S,onChange:t=>U(t.target.checked),className:"h-4 w-4"}),"Use my phone number"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Investigator Email",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"email",value:f,onChange:t=>g(t.target.value),placeholder:"Enter the primary email address for the investigator",className:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),e.jsxs("label",{className:"mt-2 flex items-center gap-2 text-sm",children:[e.jsx("input",{type:"checkbox",checked:w,onChange:t=>M(t.target.checked),className:"h-4 w-4"}),"Use my email address"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Regulatory Authority",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{value:y,onChange:t=>b(t.target.value),placeholder:"Enter the regulatory authority overseeing the trials",className:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium mb-1",children:["Regulatory Authority Address",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{value:N,onChange:t=>C(t.target.value),placeholder:"Enter the full mailing address of the regulatory authority",className:"w-full rounded-lg border px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),e.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[e.jsx("p",{children:"By registering, you consent to receive trial match leads and communication updates from TrialCliniq. Your site, investigator and admin data will be securely stored in compliance with HIPAA standards and will be used solely for trial matching and engagement services within this platform."}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border"}),"I consent to the use of my professional and site data as described."]}),e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",className:"h-4 w-4 rounded border"}),"I agree to receive email and SMS notifications for trial match leads and platform updates."]}),e.jsxs("p",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{d:"M12 2a9 9 0 1 0 9 9A9.01 9.01 0 0 0 12 2Zm1 13h-2v-2h2Zm0-4h-2V7h2Z"})}),"You may revoke consent at any time in Settings"]})]}),e.jsx("button",{type:"submit",disabled:k,className:"mt-2 w-full px-6 py-3 rounded-full bg-blue-600 text-white hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Creating Account...":"Create Account"}),e.jsxs("p",{className:"text-xs text-gray-500 flex items-center gap-2 mt-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-4 h-4",children:e.jsx("path",{d:"M12 2a9 9 0 1 0 9 9A9.01 9.01 0 0 0 12 2Zm1 13h-2v-2h2Zm0-4h-2V7h2Z"})}),"Your data stays private and protected with HIPAA-compliant security."]})]})]})]}),e.jsx("div",{className:"fixed bottom-4 left-4",children:e.jsx("button",{onClick:R,className:"text-xs px-3 py-1.5 rounded-full border border-gray-300 bg-white text-gray-600 hover:bg-gray-50 hover:text-gray-900",title:"Skip authentication for testing (dev only)",children:"Skip Sign-In"})})]})}export{F as default};
