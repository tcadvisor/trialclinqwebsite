import{e as v,u as y,f as j,r as l,R as w,j as e,L as N,s as L}from"./index-znp1ZwVH.js";import{H as E}from"./HomeHeader-CKVdYqKL.js";import"./HeaderActions-Bq1MN6TK.js";import"./search-A115qy-0.js";import"./shield-D8wUjd5V.js";function H(){const i=v(),n=y(),{isAuthenticated:c,signIn:h,user:r}=j(),[d,f]=l.useState(""),[m,u]=l.useState(null),[p,x]=l.useState(!1);w.useEffect(()=>{var t,s;if(c){const o=(s=(t=n.state)==null?void 0:t.from)==null?void 0:s.pathname,a=(r==null?void 0:r.role)==="provider"?"/providers/dashboard":"/patients/dashboard";i(o||a,{replace:!0})}},[c,i,n.state,r]);const g=async t=>{var s,o;t.preventDefault(),u(null),x(!0);try{localStorage.setItem("pending_role_v1","provider");const a=await L({email:d.trim(),password:""});if(a){h({...a,role:"provider"});const b=((o=(s=n.state)==null?void 0:s.from)==null?void 0:o.pathname)||"/providers/dashboard";i(b,{replace:!0})}}catch(a){u(a instanceof Error?a.message:"Invalid email or password. Please try again.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(E,{}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Provider Login"}),e.jsxs("form",{onSubmit:g,className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Work email",type:"email",value:d,onChange:t=>f(t.target.value)}),m&&e.jsx("div",{className:"text-sm text-red-600",children:m}),e.jsx("button",{className:"w-full px-4 py-2 rounded bg-gray-900 text-white hover:bg-black disabled:opacity-50 disabled:cursor-not-allowed",type:"submit",disabled:p,children:p?"Redirecting...":"Continue with Microsoft"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["New to TrialCliniq? ",e.jsx(N,{to:"/providers/create",className:"text-blue-600 hover:underline",children:"Create an account"})]})]})]})}export{H as default};
