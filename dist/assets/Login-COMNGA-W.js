import{e as j,u as N,f as w,r as l,R as L,j as e,L as S,s as E}from"./index-CCxlcZzJ.js";import{H as I}from"./HomeHeader-CuYLgdJm.js";import"./HeaderActions-DkMyBX6h.js";import"./search-BWw5TR3N.js";import"./shield-yvlJJjQt.js";function M(){var g;const n=j(),r=N(),{isAuthenticated:d,signIn:b,user:o}=w(),[c,f]=l.useState(""),[m,u]=l.useState(null),[p,x]=l.useState(!1),h=(g=r.state)==null?void 0:g.authMessage;L.useEffect(()=>{var t,s;if(d){const i=(s=(t=r.state)==null?void 0:t.from)==null?void 0:s.pathname,a=(o==null?void 0:o.role)==="provider"?"/providers/dashboard":"/patients/dashboard";n(i||a,{replace:!0})}},[d,n,r.state,o]);const v=async t=>{var s,i;t.preventDefault(),u(null),x(!0);try{localStorage.removeItem("pending_signup_v1"),localStorage.setItem("pending_role_v1","provider");const a=await E({email:c.trim(),password:""});if(a){b({...a,role:"provider"});const y=((i=(s=r.state)==null?void 0:s.from)==null?void 0:i.pathname)||"/providers/dashboard";n(y,{replace:!0})}}catch(a){u(a instanceof Error?a.message:"Invalid email or password. Please try again.")}finally{x(!1)}};return e.jsxs("div",{className:"min-h-screen bg-white text-gray-900",children:[e.jsx(I,{}),e.jsxs("main",{className:"max-w-md mx-auto px-4 py-10",children:[e.jsx("h1",{className:"text-3xl font-semibold mb-6",children:"Provider Login"}),h&&e.jsx("div",{className:"mb-4 rounded border border-amber-300 bg-amber-50 text-amber-800 px-3 py-2 text-sm",children:h}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsx("input",{className:"w-full border rounded px-3 py-2",placeholder:"Work email",type:"email",value:c,onChange:t=>f(t.target.value)}),m&&e.jsx("div",{className:"text-sm text-red-600",children:m}),e.jsx("button",{className:"w-full px-4 py-2 rounded bg-gray-900 text-white hover:bg-black disabled:opacity-50 disabled:cursor-not-allowed",type:"submit",disabled:p,children:p?"Redirecting...":"Continue with Microsoft"})]}),e.jsxs("p",{className:"text-sm text-gray-600 mt-4",children:["New to TrialCliniq? ",e.jsx(S,{to:"/providers/create",className:"text-blue-600 hover:underline",children:"Create an account"})]})]})]})}export{M as default};
